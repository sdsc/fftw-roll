<?xml version="1.0" standalone="no"?>

<kickstart>

<description>
FFTW library module settings
http://www.fftw.org
</description>

<copyright>
Copyright (c) 2000 - 2011 The Regents of the University of California.
All rights reserved. Rocks(r) v5.1 www.rocksclusters.org
</copyright>

<changelog>
</changelog>

<post>

/bin/mkdir -m 0755 -p /opt/modulefiles/applications/.gnu/fftw
/bin/mkdir -m 0755 -p /opt/modulefiles/applications/.intel/fftw
/bin/mkdir -m 0755 -p /opt/modulefiles/applications/.pgi/fftw

<file name="/opt/modulefiles/applications/.gnu/fftw/3.2.1" perms="0644">
#%Module1.0
module-whatis "fftw"
module-whatis "Version: 3.2.1"
module-whatis "Description: fftw"
module-whatis "Compiler: gnu"
set fftwHome /opt/fftw/3.2.1/gnu
setenv FFTWHOME $fftwHome
prepend-path PATH $fftwHome/bin
prepend-path LD_LIBRARY_PATH $fftwHome/lib
prepend-path LIBPATH $fftwHome/lib
</file>
<file name="/opt/modulefiles/applications/.intel/fftw/3.2.1" perms="0644">
#%Module1.0
module-whatis "fftw"
module-whatis "Version: 3.2.1"
module-whatis "Description: fftw"
module-whatis "Compiler: intel"
set fftwHome /opt/fftw/3.2.1/intel
setenv FFTWHOME $fftwHome
prepend-path PATH $fftwHome/bin
prepend-path LD_LIBRARY_PATH $fftwHome/lib
prepend-path LIBPATH $fftwHome/lib
</file>
<file name="/opt/modulefiles/applications/.pgi/fftw/3.2.1" perms="0644">
#%Module1.0
module-whatis "fftw"
module-whatis "Version: 3.2.1"
module-whatis "Description: fftw"
module-whatis "Compiler: pgi"
set fftwHome /opt/fftw/3.2.1/pgi
setenv FFTWHOME $fftwHome
prepend-path PATH $fftwHome/bin
prepend-path LD_LIBRARY_PATH $fftwHome/lib
prepend-path LIBPATH $fftwHome/lib
</file>

<file name="/opt/modulefiles/applications/.gnu/fftw/.version.3.2.1">
#%Module1.0
set ModulesVersion "3.2.1"
</file>
<file name="/opt/modulefiles/applications/.intel/fftw/.version.3.2.1">
#%Module1.0
set ModulesVersion "3.2.1"
</file>
<file name="/opt/modulefiles/applications/.pgi/fftw/.version.3.2.1">
#%Module1.0
set ModulesVersion "3.2.1"
</file>

/bin/ln -s /opt/modulefiles/applications/.gnu/fftw/.version.3.2.1 \
           /opt/modulefiles/applications/.gnu/fftw/.version
/bin/ln -s /opt/modulefiles/applications/.intel/fftw/.version.3.2.1 \
           /opt/modulefiles/applications/.intel/fftw/.version
/bin/ln -s /opt/modulefiles/applications/.pgi/fftw/.version.3.2.1 \
           /opt/modulefiles/applications/.pgi/fftw/.version

<file name="/opt/modulefiles/applications/.gnu/fftw/2.1.5" perms="0644">
#%Module1.0
module-whatis "fftw"
module-whatis "Version: 2.1.5"
module-whatis "Description: fftw"
module-whatis "Compiler: gnu"
if { ! [info exists env(MPIHOME)] } {
  puts stderr "Need to load an mpi module first"
  exit
} elseif { [string match "*mpich2*" $env(MPIHOME)] } {
  set mpiFlavor mpich2
} elseif { [string match "*mvapich2*" $env(MPIHOME)] } {
  set mpiFlavor mvapich2
} elseif { [string match "*openmpi*" $env(MPIHOME)] } {
  set mpiFlavor openmpi
} else {
  puts stderr "Unknown mpi $env(MPIHOME)"
  exit
}
set fftwHome /opt/fftw/2.1.5/gnu/$mpiFlavor
setenv FFTWHOME $fftwHome
prepend-path LIBPATH $fftwHome/lib
</file>
<file name="/opt/modulefiles/applications/.intel/fftw/2.1.5" perms="0644">
#%Module1.0
module-whatis "fftw"
module-whatis "Version: 2.1.5"
module-whatis "Description: fftw"
module-whatis "Compiler: intel"
if { ! [info exists env(MPIHOME)] } {
  puts stderr "Need to load an mpi module first"
  exit
} elseif { [string match "*mpich2*" $env(MPIHOME)] } {
  set mpiFlavor mpich2
} elseif { [string match "*mvapich2*" $env(MPIHOME)] } {
  set mpiFlavor mvapich2
} elseif { [string match "*openmpi*" $env(MPIHOME)] } {
  set mpiFlavor openmpi
} else {
  puts stderr "Unknown mpi $env(MPIHOME)"
  exit
}
set fftwHome /opt/fftw/2.1.5/intel/$mpiFlavor
setenv FFTWHOME $fftwHome
prepend-path LIBPATH $fftwHome/lib
</file>
<file name="/opt/modulefiles/applications/.pgi/fftw/2.1.5" perms="0644">
#%Module1.0
module-whatis "fftw"
module-whatis "Version: 2.1.5"
module-whatis "Description: fftw"
module-whatis "Compiler: pgi"
if { ! [info exists env(MPIHOME)] } {
  puts stderr "Need to load an mpi module first"
  exit
} elseif { [string match "*mpich2*" $env(MPIHOME)] } {
  set mpiFlavor mpich2
} elseif { [string match "*mvapich2*" $env(MPIHOME)] } {
  set mpiFlavor mvapich2
} elseif { [string match "*openmpi*" $env(MPIHOME)] } {
  set mpiFlavor openmpi
} else {
  puts stderr "Unknown mpi $env(MPIHOME)"
  exit
}
set fftwHome /opt/fftw/2.1.5/pgi/$mpiFlavor
setenv FFTWHOME $fftwHome
prepend-path LIBPATH $fftwHome/lib
</file>

<file name="/opt/modulefiles/applications/.gnu/fftw/.version.2.1.5">
#%Module1.0
set ModulesVersion "2.1.5"
</file>
<file name="/opt/modulefiles/applications/.intel/fftw/.version.2.1.5">
#%Module1.0
set ModulesVersion "2.1.5"
</file>
<file name="/opt/modulefiles/applications/.pgi/fftw/.version.2.1.5">
#%Module1.0
set ModulesVersion "2.1.5"
</file>

</post>

</kickstart>
